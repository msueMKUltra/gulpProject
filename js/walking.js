"use strict";$(function(){function t(){var t=g.selectAll("circle").data(n),a=t.enter();t.exit();t.transition().duration(i).attr("cx",function(t,a){return l(t.x)}).attr("cy",function(t,a){return s(t.y)}).attr("r",function(t,a){return p(d-n.length+a+1)}).attr("opacity",.3),a.append("circle").attr("cx",function(t,a){return l(1==n.length?t.x:n[a-1].x)}).attr("cy",function(t,a){return s(1==n.length?t.y:n[a-1].y)}).attr("r",function(t,a){return 1==n.length?0:p(a-1)}).attr("opacity",0).transition().duration(i).attr("cx",function(t,a){return l(t.x)}).attr("cy",function(t,a){return s(t.y)}).attr("r",function(t,a){return p(d)}).attr("opacity",.7).on("start",function(t,a){c.append("circle").classed("blink",!0).attr("cx",function(){return l(1==n.length?t.x:n[a-1].x)}).attr("cy",function(){return s(1==n.length?t.y:n[a-1].y)}).attr("r",0).attr("opacity",1).transition().duration(i).attr("cx",l(t.x)).attr("cy",s(t.y)).attr("opacity",0).attr("r",30).on("end",function(){d3.select(this).remove()});var r=c.select(".location");r.empty()&&(r=c.append("text").classed("location",!0).text("(0, 0)").attr("text-anchor","middle").attr("transform","translate("+(o.width/2-o.padding)+", 0)").attr("font-size",40).attr("opacity",.7).attr("dy",-10));var e=r.text().split(", "),d=e[0].split("(")[1],p=e[1].split(")")[0];r.transition().duration(i).tween("xyChange",function(){var a=d3.interpolateRound(d,t.x),n=d3.interpolateRound(p,t.y);return function(t){r.text("("+a(t)+", "+n(t)+")")}})})}function a(){if(1!=n.length){var t=d3.select(".noOneCircle");t.empty()||t.remove();var a=b.selectAll("path").data(e),r=a.enter(),o=(a.exit(),d3.line().x(function(t,a){return x(a+1)}).y(function(t){return v(y(t.f))}));a.attr("stroke-dashoffset",0).attr("stroke","black").attr("stroke-width",2).attr("fill","none").transition().duration(i).attr("transform",function(t,a){r=x(a+1);if(e.length>=d)var r=x(a);return"translate("+r+", 0)"});var c=r.append("path").attr("d",function(t){return o(t)}).attr("transform",function(t,a){var r=x(a+1);return e.length>=d+1&&(r=x(d)),"translate("+r+", 0)"}).attr("stroke","black").attr("stroke-width",2).attr("fill","none").attr("opacity",.5).attr("marker-start","url(#linePoint)"),l=c.node().getTotalLength();c.attr("stroke-dasharray",l+" "+l).attr("stroke-dashoffset",l).transition().duration(i).attr("stroke-dashoffset",0).on("start",function(t,a){m.append("circle").classed("blink",!0).attr("cx",function(){return x(a+1)}).attr("cy",function(){return v(y(t[1].f))}).attr("transform",function(){var t=x(2)+h.padding/2;return a>=d-1&&(t=h.padding/2),"translate("+t+", 0)"}).attr("r",0).attr("opacity",1).transition().duration(i).attr("opacity",0).attr("r",30).on("end",function(){d3.select(this).remove()}),m.append("circle").classed("blink",!0).attr("cx",function(){return x(a+1)}).attr("cy",function(){return v(y(t[1].f))}).attr("transform",function(){var t=x(2)+h.padding/2;return a>=d-1&&(t=h.padding/2),"translate("+t+", 0)"}).attr("r",0).attr("opacity",0).transition().duration(i).attr("opacity",.5).attr("r",6).on("end",function(){d3.select(this).remove()});var r=m.select(".location");r.empty()&&(r=m.append("text").classed("location",!0).text("0%(0)").attr("text-anchor","middle").attr("transform","translate("+(h.width/2-h.padding)+", 0)").attr("font-size",40).attr("opacity",.7).attr("dy",-10));var n=r.text().split("%"),e=n[0],o=n[1].split("(")[1].split(")")[0];r.transition().duration(i).tween("pfChange",function(){var a=d3.interpolateRound(e,y(100*t[1].f)),n=d3.interpolateRound(o,t[1].f);return function(t){r.text(a(t)+"%("+n(t)+")")}})}).filter(function(t,a){return a>=d-1}).attr("transform",function(t,a){return"translate("+x(d-1)+", 0)"})}else b.append("circle").classed("noOneCircle",!0).data(n).attr("cx",function(t,a){return x(a+1)}).attr("cy",function(t){return v(y(t.f))}).attr("fill","black").attr("r",0).attr("opacity",0).transition().duration(i).attr("r",6).attr("opacity",.5).on("start",function(t,a){m.append("circle").classed("blink",!0).attr("cx",function(){return x(a+1)}).attr("cy",function(){return v(y(t.f))}).attr("transform","translate("+h.padding/2+", 0)").attr("r",0).attr("opacity",1).transition().duration(i).attr("opacity",0).attr("r",30).on("end",function(){d3.select(this).remove()});var r=m.select(".location");r.empty()&&(r=m.append("text").classed("location",!0).text("0%(0)").attr("text-anchor","middle").attr("transform","translate("+(h.width/2-h.padding)+", 0)").attr("font-size",40).attr("opacity",.7).attr("dy",-10));var n=r.text().split("%"),e=n[0],d=n[1].split("(")[1].split(")")[0];r.transition().duration(i).tween("pfChange",function(){var a=d3.interpolateRound(e,y(100*t.f)),n=d3.interpolateRound(d,t.f);return function(t){r.text(a(t)+"%("+n(t)+")")}})})}function r(){var r=~~(32*Math.random()),i=~~(32*Math.random()),o=~~(256*Math.random());if(n.length==d+1&&(n.shift(),g.selectAll("circle").filter(function(t,a){return 0==a}).remove()),n.push({x:r,y:i,f:o}),e.length==d&&(e.shift(),b.selectAll("path").filter(function(t,a){return 0==a}).remove()),n.length>1){var c=n[n.length-2],l=n[n.length-1];e.push([c,l])}t(),a()}var n=[],e=[],i=2e3,d=5,o={width:300,height:300,padding:50},c=d3.select(".container").append("svg").attr("width",o.width).attr("height",o.height).append("g").attr("transform","translate("+o.padding+","+o.padding+")"),l=d3.scaleLinear().domain([0,32]).range([0,o.width-2*o.padding]),s=d3.scaleLinear().domain([0,32]).range([o.height-2*o.padding,0]),p=d3.scaleQuantile().domain(d3.range(d+1)).range([0,4,5,6,7,8]),u=(d3.scaleQuantile().domain(d3.range(d+1)).range([0,.3,.4,.5,.6,.7]),d3.axisBottom().tickValues([2,9,16,23,30]).tickFormat("").tickSize(o.height-2*o.padding).scale(l));c.append("g").classed("y-grid",!0).call(u);var f=d3.axisRight().tickValues([2,9,16,23,30]).tickFormat("").tickSize(o.width-2*o.padding).scale(s);c.append("g").classed("x-grid",!0).call(f);var g=c.append("g").classed("circle-group",!0),h={width:500,height:300,padding:50},m=d3.select(".container").append("svg").attr("width",h.width).attr("height",h.height).append("g").attr("transform","translate("+h.padding+","+h.padding+")"),x=d3.scaleLinear().domain([1,d]).range([0,h.width-2*h.padding]),y=d3.scaleLinear().domain([0,255]).range([0,1]),v=d3.scaleLinear().domain([0,1]).range([h.height-2*h.padding,0]),k=(d3.scaleQuantile().domain(d3.range(d)).range([4,6,8,10,12]),d3.scaleQuantile().domain(d3.range(d)).range([.3,.4,.5,.6,.7]),d3.axisBottom().tickValues(d3.range(1,d+1)).tickFormat(d3.format("d")).scale(x));m.append("g").classed("x-axis",!0).attr("transform","translate("+h.padding/2+","+(h.height-2*h.padding)+")").call(k);var w=d3.axisRight().tickValues(d3.range(0,1.25,.25)).tickSize(0).tickFormat(d3.format(".0%")).scale(v);m.append("g").classed("y-axis",!0).attr("transform","translate( -36, -10)").call(w);var R=d3.axisRight().tickValues(d3.range(0,1.25,.25)).tickFormat("").tickSize(h.width).scale(v);m.append("g").classed("x-grid",!0).attr("transform","translate("+-h.padding+", 0)").call(R);var b=m.append("g").classed("line-group",!0).attr("transform","translate("+h.padding/2+", 0)");m.append("defs").append("marker").attr("id","linePoint").attr("viewBox","0 0 12 12").attr("refX","6").attr("refY","6").attr("markerHeight","6").attr("markerWidth","6").attr("orient","auto").append("circle").attr("cx",6).attr("cy",6).attr("r",6).attr("fill","black"),r(),setInterval(r,i)});
//# sourceMappingURL=walking.js.map
