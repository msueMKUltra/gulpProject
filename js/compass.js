"use strict";$(function(){function t(t){return t.y=d3.range(l).map(Math.random),t}function r(){var t,r,e=0,a=0;do{t=(e=2*Math.random()-1)*e+(a=2*Math.random()-1)*a}while(0==t||t>1);return r=Math.sqrt(-2*Math.log(t)/t),e*r}function e(t,e){return function(){return o.push(t+e+r()),t+e*r()}}function a(t){var r=t.length;if(0===r)return NaN;for(var e=0,a=-1;++a<r;)e+=(t[a]-e)/(a+1);return e}function n(t){var r=t.length;if(r<1)return NaN;if(1===r)return 0;for(var e=a(t),n=-1,o=0;++n<r;){var i=t[n]-e;o+=i*i}return o/(r-1)}var o=[],i={top:20,right:10,bottom:20,left:35},l=1e4,u=d3.qq().width(270).height(270).domain([-.1,1.1]).tickFormat(function(t){return~~(100*t)}),s=d3.select("body").append("svg").attr("width",3*(270+i.right+i.left)).attr("height",270+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")");d3.json("./json/compass/turkers.json",function(r,o){if(r)throw r;var d=a(o),f=Math.sqrt(n(o)),c=s.selectAll("g").data([{x:d3.range(l).map(e(d,f)),y:o,label:"Gaussian (Normal) Distribution"}]).enter().append("g").attr("class","qq").attr("transform",function(t,r){return"translate("+(270+i.right+i.left)*r+")"});c.append("rect").attr("class","box").attr("width",270).attr("height",270),c.call(u),c.append("text").attr("dy","1.3em").attr("dx",".6em").text(function(t){return t.label}),u.duration(1e3),window.transition=function(){c.datum(t).call(u)},d3.selectAll(".quantile").each(function(t,r){var e,a,n,o=d3.select(this),i=d3.select(".qq"),l=Number(o.attr("data-x")),u=Number(o.attr("data-y")),s=Math.round(100*o.attr("data-raw"))/100,d=[[l,u,u-10],[l+10,u,u-10],[l+10,u+6,u-16],[l+20,u-5,u-5]];o.on("mouseover",function(){var t=d3.svg.area().x(function(t){return t[0]+10}).y0(function(t){return t[1]+6}).y1(function(t){return t[2]+6});n=i.append("path").attr("d",t(d)).attr("fill","violet"),a=i.append("text").attr("x",l+32).attr("y",u+5).attr("text-anchor","start").attr("font-size","12px").text(s).attr("fill","hotpink"),e=i.append(function(){return o.node()}).style("r",12).style("stroke","blueviolet").style("fill","white")}),o.on("mouseout",function(){e.style("r",6).style("stroke","white").style("fill","slateblue"),a.remove(),n.remove()})})});[{firstname:"Malcom",lastname:"Reynolds"},{firstname:"Kaylee",lastname:"Frye"},{firstname:"Jayne",lastname:"Cobb"}].map(function(t,r){var e=document.createElement("div");$(e).appendTo(this)},$("body"))});
//# sourceMappingURL=compass.js.map
