{"version":3,"sources":["d3js_ch04.js"],"names":["$","drawBar","barUpdate","svgBar","selectAll","data","svg","barEnter","enter","exit","append","classed","attr","i","rect","width","step","d","height","transition","duration","delay","d3","push","text","addBar","random","Math","floor","sortBar","sort","ascending","select","box4","node","empty","console","box7","box11","box8","property","box10","box12","remove","date","time","dataset","box13","datum","datumset","map","get","xxx","entries","log","count","click"],"mappings":"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","file":"d3js_ch04.js","sourcesContent":["$(function(){\n\tvar box = d3.select('div').classed('box'); // true (jq. hasClass)\n\tvar box2 = d3.select('div').classed('box2'); // false (jq. hasClass)\n\tvar box3 = d3.select('div').classed('box3 box4', true); // (jq. addClass)\n\tvar box4 = d3.select('div').classed('box3', false); // (jq. removeClass)\n\tconsole.log(box);\n\tconsole.log(box2);\n\tconsole.log(box3);\n\tconsole.log(box4);\n\t\n\tvar box5 = d3.select('.box').append('p').node(); // <p></p>\n\tvar box6 = d3.select('.box').append('p').empty(); // false\n\tvar box7 = d3.selectAll('.box p').size(); // 2 (不要用到.select，不然永遠是1)\n\tconsole.log(box5);\n\tconsole.log(box6);\n\tconsole.log(box7);\n\n\tvar box8 = d3.select('.box').append('input');\n\tvar box9 = box8.property('value', 'prop'); // 設定vlaue 要用property，不是attr\n\tvar box10 = box8.property('value'); // 取vlaue 要用property，不是attr\n\tconsole.log(box9);\n\tconsole.log(box10);\n\n\tvar box11 = d3.select('.box').append('p').classed('boxP', true).text('<span>xxx</span>');\n\n\tvar box12 = d3.select('.box').append('p').classed('boxP2', true).html('<span class=\"span\">xxx</span>');\n\n\tbox12.insert('div', '.span'); // 設第二個參數為insertBefore，不設等於append\n\tbox12.remove();\n\n\tvar dataset = [\n\t\t{date: 'today', time: 'now'},\n\t\t{date: 'yesterday', time: 'recently'},\n\t\t{date: 'tomorrow', time: 'future'}\n\t];\n\n\tvar datumset = dataset[0].date;\n\n\tvar box13 = d3.select('body').append('ul'); // append元素之後，相當於選擇此元素\n\tbox13.append('li').datum(datumset).text(function(d){ return d;});\n\tconsole.log(box13);\n\n\td3.selectAll('.list li').datum(datumset).text(function(d){ return d;}); // datum的資料只能餵一筆，非object\n\n\tvar map = d3.map(dataset, function(d){ return d.date;});\n\n\tvar has = map.has('today');\n\tvar get = map.get('today');\n\tconsole.log(has);\n\tconsole.log(get);\n\n\tmap.set('today', {xxx:'xxx'}); // 利用鍵去設定值\n\tconsole.log(map.get('today')); // 鍵和值是分開的，所以資料還是取得到\n\n\tvar entries = map.entries(); // 列出所有鍵和值，等於object = key: ..., value: ...\n\tconsole.log(entries);\n\tvar keys = map.keys(); // 則是取出上面object的key\n\tconsole.log(keys);\n\tvar values = map.values(); // 取出object的value\n\tconsole.log(values);\n\n\tmap.each(function(d, i){ // d = value, i = key\n\t\tconsole.log(d);\n\t\tconsole.log(i);\n\t});\n\n\tvar svg = { width: 1000, height: 200, data:[], count: 10};\n\tvar svgBar = d3.select('body').append('svg').attr('width', svg.width).attr('height', svg.height);\n\tvar rect = { width: 50, step: 10}\n\n\tfor (var i =  svg.count - 1; i >= 0; i--) {\n\t\tvar random = Math.floor(Math.random()*100);\n\t\tsvg.data.push(random);\n\t}\n\n\tdrawBar();\n\n\t$('.roller-add').click(function(){\n\t\taddBar();\n\t\tdrawBar();\n\t});\n\n\t$('.roller-sort').click(function(){\n\t\tsortBar();\n\t\tdrawBar();\n\t});\n\n\tfunction drawBar(){\n\n\t\td3.selectAll('.bar').remove();\n\n\t\tvar barUpdate = svgBar.selectAll('g').data(svg.data);\n\n\t\tvar barEnter = barUpdate.enter();\n\n\t\tvar barExit = barUpdate.exit();\n\n\t\tbarEnter.append('g').classed('bar', true).append('rect')\n\t\t\t.attr('x', function(d, i){\n\t\t\t\treturn i * (rect.width + rect.step);\n\t\t\t})\n\t\t\t.attr('y', function(d){\n\t\t\t\treturn svg.height;\n\t\t\t})\n\t\t\t.attr('width', rect.width)\n\t\t\t.attr('height', svg.height)\n\t\t\t.transition()\n\t\t\t.duration(500)\n\t\t\t.delay(function(d, i){ return 200*i;})\n\t\t\t.attr('y', function(d){\n\t\t\t\treturn svg.height - d;\n\t\t\t})\n\t\t\t.attr('height', function(d){ return d;})\n\t\t\t.attr('fill', 'steelblue');\n\n\t\td3.selectAll('.bar').data(svg.data).append('text')\n\t\t\t.attr('x', function(d, i){\n\t\t\t\treturn i * (rect.width + rect.step);\n\t\t\t})\n\t\t\t.attr('y', function(d){\n\t\t\t\treturn svg.height - d;\n\t\t\t})\n\t\t\t.attr('dx', rect.width/2)\n\t\t\t.attr('dy', -20)\n\t\t\t.attr('font-size', '14px')\n\t\t\t.attr('text-anchor', 'middle')\n\t\t\t.transition()\n\t\t\t.duration(500)\n\t\t\t.delay(function(d, i){ return 200 * (i + 1);})\n\t\t\t.text(function(d){ return d;});\n\t}\n\n\tfunction addBar(){\n\t\tvar random = Math.floor(Math.random()*100);\n\t\tsvg.data.push(random);\n\t}\n\n\tfunction sortBar(){\n\t\tsvg.data.sort(d3.ascending);\n\t}\n\n});"]}