{"version":3,"sources":["d3js_ch05.js"],"names":["$","linear","d3","scaleLinear","domain","range","rangeRound","clamp","nice","tickFormat","pow","exponent","console","log","quantize","scaleQuantize","d","svg","select","append","attr","dataset","selectAll","qutile","scaleQuantile","descending","enter","threshold","scaleThreshold","invertExtent","scaleOrdinal","point","padding","scalePoint","bands","scaleBand","color","color2","schemeCategory10","xScale","schemeCategory20","xPow","xLog","axis","axisBottom","ticks","sort","axis2","tickValues","axis3","tickSizeInner","axis5","axis6","scalePow","gAxis","axis4","center","svg2","svg2g","call","yScale","xAxis","format","yAxis","data","map","axisLeft"],"mappings":"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","file":"d3js_ch05.js","sourcesContent":["$(function(){\n\tvar linear = d3.scaleLinear()\n\t\t\t\t\t.domain([0, 500])\n\t\t\t\t\t.range([0, 100]); //domain, range 的數字數量需相等\n\tconsole.log(linear(50));\n\tconsole.log(linear.invert(50));\n\tconsole.log(linear.domain());\n\tconsole.log(linear.range());\n\n\tlinear.domain([0, 50]);\n\tconsole.log(linear(50));\n\n\tlinear.range([0, 10]);\n\tconsole.log(linear(33));\n\tlinear.rangeRound([0, 10]); // 四捨五入range的值\n\tconsole.log(linear(33));\n\n\tconsole.log(linear(100));\n\tlinear.clamp(true); // default is false, true for limited range\n\tconsole.log(linear(100));\n\n\tlinear.nice([0.111111, 50.55555]); // 取理想的domain\n\tconsole.log(linear.domain());\n\n\tconsole.log(linear.ticks()); // default is 10, but it will set a value make sense. Most for axis\n\tconsole.log(linear.ticks(5)); // ticks 吐出分出的domain (針對domain)\n\n\tvar tickFormat = linear.tickFormat(5, '+'); // 設定後，用法如function，還有 % or $ 等\n\tconsole.log(tickFormat(33));\n\n\tvar pow = d3.scalePow().exponent(3)\n\t\t\t\t.domain([0, 3])\n\t\t\t\t.range([0, 90]);\n\tconsole.log(pow(1.5)); // domain 和餵的值先三次方，再做線性對應\n\n\tvar linear = d3.scaleLinear()\n\t\t\t\t\t.domain([0, Math.pow(3, 3)])\n\t\t\t\t\t.range([0, 90]);\n\tconsole.log(linear(Math.pow(1.5, 3))); // 此線性等同上方pow\n\n\tvar quantize = d3.scaleQuantize() // 連續區間對應到離散區間\n\t\t\t\t\t.domain([0, 10]) // domain不論數字有多少個，都只考慮頭尾\n\t\t\t\t\t.range(['red', 'green', 'blue', 'yellow', 'black']);\n\n\tconsole.log(quantize(1));\n\tconsole.log(quantize(3));\n\tconsole.log(quantize(5.999));\n\tconsole.log(quantize(6));\n\n\tvar quantize = d3.scaleQuantize() \n\t\t\t\t\t.domain([0, 50])\n\t\t\t\t\t.range(['#ff0000', '#ff3300', '#ff6600', '#ff9900', '#ffcc00']);\n\tvar svg = d3.select('body').append('svg').attr('width', 500).attr('height', 500);\n\tvar dataset = [5, 15, 25, 35, 45];\n\tsvg.selectAll('circle').data(dataset.sort(d3.descending)).enter().append('circle')\n\t\t.attr('cx', 250).attr('cy', 250).attr('r', function(d){ return d;})\n\t\t.attr('fill', function(d){ return quantize(d);}).attr('opacity', 0.8);\n\n\tvar qutile = d3.scaleQuantile()\n\t\t\t\t\t.domain([0, 2, 4, 10]) //每個數都會考慮，所以中間取3\n\t\t\t\t\t.range([1, 100]);\n\tconsole.log(qutile(2.9));\n\tconsole.log(qutile(3.1));\n\n\tvar threshold = d3.scaleThreshold()\n\t\t\t\t\t.domain([10, 20, 30]) // 將數字為中斷點設區間\n\t\t\t\t\t.range(['red', 'green', 'blue', 'black']);\n\tconsole.log(threshold(5));\n\tconsole.log(threshold(15));\n\tconsole.log(threshold(25));\n\tconsole.log(threshold(33));\n\tconsole.log(threshold.invertExtent('red')); // invertExtent可以返回看區間\t\n\tconsole.log(threshold.invertExtent('green'));\n\tconsole.log(threshold.invertExtent('blue'));\n\tconsole.log(threshold.invertExtent('black'));\n\n\tvar ordinal = d3.scaleOrdinal() // 離散值對應離散值，v4.把 rangePoints 獨立成 scalePoint()\n\t\t\t\t\t.domain([1, 2, 3, 4, 5])\n\t\t\t\t\t.range([10, 20, 30, 40, 50]); \n\tconsole.log(ordinal.range());\n\n\t// range = step*0.1 + st ep * (n-1) + step*0.1\n\tvar point = d3.scalePoint() // v3. ordinal.rangePoints([0, 100], 5) => v4. scalePoint();\n\t\t\t\t\t.domain([1, 2, 3, 4, 5])\n\t\t\t\t\t.range([0, 100]); // rangeRound 取整數\n\tconsole.log(point(2));\n\tpoint.padding(.1); // defalt = 0\n\tconsole.log(point(2));\n\n\t// step = bandwidth + step*paddingInner\n\t// range = step*paddingOuter + step*(n-1) + bandwidth + step*paddingOuter\n\tvar bands = d3.scaleBand() // v3. ordinal.rangeBands([0, 100], 5) => v4. scaleBands();\n\t\t\t\t\t.domain([1, 2, 3, 4, 5])\n\t\t\t\t\t.range([0, 100]); // it will be the start point of interval\n\tconsole.log(bands(2));\n\tbands.padding(.1); // both set paddingInner & paddingOuter\n\tconsole.log(bands(2));\n\tbands.paddingInner(.2);\n\tconsole.log(bands(2));\n\tbands.paddingOuter(.2);\n\tconsole.log(bands(2));\n\n\tvar color = d3.scaleOrdinal(d3.schemeCategory10); // v3. d3.scaleCategory20() => v4. d3.scaleOrdinal(d3.schemeCategory10)\n\tvar color1 = d3.scaleOrdinal(d3.schemeCategory20);\n\tvar color2 = d3.scaleOrdinal(d3.schemeCategory20a);\n\tvar color3 = d3.scaleOrdinal(d3.schemeCategory20b);\n\tsvg.append('g').selectAll('circle').data(dataset.sort(d3.descending)).enter().append('circle')\n\t\t.attr('cx', 400).attr('cy', 250).attr('r', function(d){ return d;})\n\t\t.attr('fill', function(d){ return color(d);}).attr('opacity', 0.8);\n\n\tvar xScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, 100])\n\t\t\t\t\t.range([0, 300]);\n\tvar xPow = d3.scalePow().exponent(2).domain([0, 1]).range([0, 500]);\n\tvar xLog = d3.scaleLog().domain([0.01, 1]).range([0, 500]);\n\tvar axis = d3.axisBottom(xScale).ticks(5);\n\tvar axis2 = d3.axisBottom(xScale).tickValues([30]);\n\tvar axis3 = d3.axisBottom(xScale).tickSizeInner(2);\n\tvar axis4 = d3.axisBottom(xScale).tickSize(12);\n\tvar axis5 = d3.axisBottom(xPow);\n\tvar axis6 = d3.axisBottom(xLog);\n\t// fix: innerTickSize => tickSizeInner\n\t// fix: outerTickSize => tickSizeOuter\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(100,300)').call(axis);\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(100,340)').call(axis2);\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(100,380)').call(axis3);\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(100,420)').call(axis4);\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(0,10)').call(axis5);\n\tvar gAxis = svg.append('g')\n\t\t\t\t\t.attr('transform','translate(0,50)').call(axis6);\n\t// axis(gAxis);\n\n\tvar center = [[0.5, 0.5], [0.7, 0.8], [0.4, 0.9], [0.11, 0.32], [0.88, 0.25], [0.75, 0.12], [0.5, 0.1], [0.2, 0.3], [0.4, 0.1], [0.6, 0.7]];\n\tvar svg2 = d3.select('body').append('svg').attr('width', 500).attr('height', 500);\n\tvar svg2g = svg2.append('g').attr('transform','translate(50,50)');\n\tvar xScale = d3.scaleLinear().domain([0, 1]).range([0, 400]);\n\tvar yScale = d3.scaleLinear().domain([0, 1]).range([400, 0]);\n\tsvg2g.selectAll('circle').data(center).enter().append('circle')\n\t\t.attr('cx', function(d){ return xScale(d[0]);}).attr('cy', function(d){ return yScale(d[1]);})\n\t\t.attr('r', 4).attr('fill', 'steelblue');\n\tvar xAxis = d3.axisBottom(xScale).tickValues(center.map(function(d){ return d[0];})).tickFormat(d3.format(\".2f\"));\n\tvar yAxis = d3.axisLeft(yScale).tickValues(center.map(function(d){ return d[1];})).tickFormat(d3.format(\".2f\"));\n\tsvg2g.append('g').attr('transform','translate(0,400)').call(xAxis); \n\tsvg2g.append('g').call(yAxis); \n});"]}