"use strict";$(function(){d3.queue().defer(d3.json,"./files/gooee/name_map.json").defer(d3.json,"./files/gooee/data_C.json").awaitAll(function(t,n){if(t)throw t;var e=n[0],r=n[1],a=[];for(var o in e)a.push({code:o,name:e[o]});var u=d3.map(a,function(t,n){return t.code});for(var o in r)u.get(o).count=r[o];var i={width:700,height:700},d={inner:10,outer:180},c=d3.select("body").append("svg").attr("width",i.width).attr("height",i.height),f=d3.pie().value(function(t){return t.count}).sort(function(t,n){return t.name.localeCompare(n.name)}).sortValues(function(t,n){return t-n}).startAngle(function(){return 0}).endAngle(function(){return 2*Math.PI}).padAngle(function(){return.03})(a),l=d3.arc().innerRadius(d.inner).outerRadius(d.outer),s=d3.schemeCategory20c,h=c.selectAll("g").data(f).enter().append("g").attr("transform","translate("+i.width/2+","+i.height/2+")");h.append("path").attr("d",function(t){return l(t)}).attr("fill",function(t,n){return s[n]}),h.append("text").attr("x",function(t){return 1.4*l.centroid(t)[0]}).attr("y",function(t){return 1.4*l.centroid(t)[1]}).attr("text-anchor","middle").text(function(t){return(t.value/d3.sum(f,function(t){return t.value})*100).toFixed(2)+"%"}),h.append("line").attr("x1",function(t){return 2*l.centroid(t)[0]}).attr("y1",function(t){return 2*l.centroid(t)[1]}).attr("x2",function(t){return 2.3*l.centroid(t)[0]}).attr("y2",function(t){return 2.3*l.centroid(t)[1]}).attr("stroke","slategray"),h.append("text").attr("text-anchor","middle").text(function(t){return t.data.name}).attr("transform",function(t){var n="rotate("+(t.startAngle+t.endAngle)/2*180/Math.PI+")";return"translate("+2.4*l.centroid(t)[0]+","+2.4*l.centroid(t)[1]+")"+n})})});
//# sourceMappingURL=pie_chart.js.map
